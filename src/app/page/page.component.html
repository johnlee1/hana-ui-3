<div class="col-md-8 offset-md-2">
    <div class="title" (click)="returnToPage()">{{page.name}}</div>
    <div class="description">{{page.description}}</div>
    <div *ngIf="page.followers.length===1" class="followers">{{page.followers.length}} follower</div>
    <div *ngIf="page.followers.length!=1" class="followers">{{page.followers.length}} followers</div>
    <button mat-button class="submit-post-btn" *ngIf="!showCreatePost" (click)="createPost()">Write a Prayer Post</button>
</div>

<div *ngIf="showPosts" class="col-md-8 offset-md-2">
    <div *ngFor="let post of page.posts">
        <mat-card (click)="viewPost(post._id)" 
                    (mouseenter)='mouseenter($event)' 
                    (mouseleave)="mouseleave($event)"
                    [ngClass]="{'card-urgent': post.urgent, 'card-resolved': post.resolved}">
            <div class="pull-right">{{post.create_date | date: 'MM/dd/yy'}}</div>
            <div class="subject" [innerHTML]="post.subject"></div> 
            <div class="prayer" [innerHTML]="post.prayer"></div>
            <!-- <div *ngIf="post.urgent || post.resolved" class="chips">
                <mat-chip-list>
                    <mat-chip *ngIf="post.urgent" class="chip-urgent">Urgent</mat-chip>
                    <mat-chip *ngIf="post.resolved" class="chip-resolved">Resolved</mat-chip>
                </mat-chip-list>
            </div> -->
        </mat-card>
    </div>
</div>

<div *ngIf="showPost">
    <app-post [post]="post"></app-post>
</div>

<div *ngIf="showCreatePost">
    <div class="col-md-12">
        <div class="row mainFormElement">
            <span class="col-md-2 write-header">subject</span>
            <quill-editor class="col-md-8"
                            theme="bubble" 
                            placeholder="What is the story about?"
                            [modules]="subjectModules"
                            [(ngModel)]="newPostSubject"
                            (onEditorCreated)="setFocus($event)"
                            (onContentChanged)="subjectContentChanged($event);">
            </quill-editor>
        </div>
        <div class="row mainFormElement">
            <div class="col-md-2 write-header">the story</div>
            <quill-editor class="col-md-8"
                            theme="bubble" 
                            placeholder="Tell the story..."
                            [modules]="storyModules"
                            [(ngModel)]="newPostStory">
            </quill-editor>
        </div>
        <div class="row mainFormElement">
            <div class="col-md-2 write-header">prayer</div>
            <quill-editor class="col-md-8"
                            theme="bubble"
                            placeholder="Write a prayer or share how to pray..."
                            [modules]="prayerModules"
                            [(ngModel)]="newPostPrayer">
            </quill-editor>
        </div>
        <div class="row col-md-8 offset-md-2 checkbox minorFormElement">
            <mat-checkbox [(ngModel)]="urgent" matTooltip="time-sensitive prayer request" [matTooltipPosition]="toolTipPos">Urgent</mat-checkbox>
        </div>
        <div class="row col-md-8 offset-md-2 checkbox minorFormElement">
            <mat-checkbox [(ngModel)]="resolved" matTooltip="resolved prayer request" [matTooltipPosition]="toolTipPos">Resolved</mat-checkbox>
        </div>
        <div *ngIf="resolved" class="row mainFormElement">
                <div class="col-md-2 write-header">resolution</div>
                <quill-editor class="col-md-8"
                                theme="bubble"
                                placeholder="Share what happened..."
                                [modules]="prayerModules"
                                [(ngModel)]="resolution">
                </quill-editor>
            </div>
        <div class="col-md-10">
            <button mat-raised-button class="pull-right submit-post-btn" color="primary" (click)="submitPost()">Share Your Prayer Post</button>
        </div>
    </div>
</div>
